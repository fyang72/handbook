---
title: "An Interactive Handbook for Pharmacometrics Analysis"
author: "Feng Yang"
date: "12/18/2018"
runtime: shiny
output:  
 html_document:
   toc: true
   fig_caption: true
   toc_float:
       collapsed: true
       smooth_scroll: true
   toc_depth: 3
   css: styles.css
   code_folding: show
   number_sections: true
   keep_md: no
pdf_document:
    fig_caption: yes
    keep_tex: yes
    toc: yes
    toc_depth: 3    
---




```{r global, include=FALSE, cache=FALSE}
 
```


```{r, setup, include=FALSE}
# back to [nonmem_dataset_integrity_check](#nonmem_dataset_integrity_check)

rm(list = ls())

if (1==2) {    
  setwd("~/handbook/")
  source("~/handbook/global.R")
}
```

 
```{r}

ALL <- reactiveValues(
  DATA   = list(), 
  FIGURE = list(), 
  TABLE = list(), 
  cppModel = list(), 
  ctlModel = list(), 
  script = list()
)  


  
```
 

 
```{r, eval=TRUE}
ihandbook = 0

folder.loc <- "~/handbook/util"

file.lst <-list.files(path = folder.loc, all.files = FALSE,full.names = TRUE, include.dirs = TRUE, recursive =TRUE)     

file.lst = file.lst[which(substr(file.lst, nchar(file.lst)-1, nchar(file.lst)) %in% c(".r", ".R"))]

for (ifile in 1:length(file.lst)) { 
  #print(file.lst[ifile]);  
  source(file=file.lst[ifile])  
}     #sys.source('file.R', envir=environment())


folder.loc <- "~/handbook/module/"
file.lst <-list.files(path = folder.loc, all.files = FALSE,full.names = TRUE, include.dirs = TRUE, recursive =TRUE)     
file.lst = file.lst[which(substr(file.lst, nchar(file.lst)-1, nchar(file.lst)) %in% c(".r", ".R"))]

file.lst = file.lst[which(!substr(gsub(folder.loc, "", file.lst, fix=TRUE), 1,1) %in% c("_"))]

for (ifile in 1:length(file.lst)) { 
  #print(file.lst[ifile]);  
  source(file=file.lst[ifile])  
}     #sys.source('file.R', envir=environment())

folder.loc <- "~/handbook/script/"
file.lst <-list.files(path = folder.loc, all.files = FALSE,full.names = TRUE, include.dirs = TRUE, recursive =TRUE)     
file.lst = file.lst[which(substr(file.lst, nchar(file.lst)-1, nchar(file.lst)) %in% c(".r", ".R"))]

file.lst = file.lst[which(!substr(gsub(folder.loc, "", file.lst, fix=TRUE), 1,1) %in% c("_"))]

for (ifile in 1:length(file.lst)) { 
  #print(file.lst[ifile]);  
  source(file=file.lst[ifile])  
}     #sys.source('file.R', envir=environment())

```
 
   
   
 
```{r eval=FALSE}
rmd <- list.files(pattern = '*.Rmd', recursive = T)
chunks <- paste0("```{r child = '", rmd, "'}\n```\n")
cat(chunks, sep = '\n')
```

 
 

```{r child = 'rmd/01_preface/01_preface.Rmd'}
```

```{r child = 'rmd/02_construct_dataset/10_construct_dataset.Rmd'}
```



```{r child = 'rmd/03_summary_dataset/01_summary_dataset.Rmd'}
```



```{r child = 'rmd/04_descriptive_analysis/01_load_dataset.Rmd'}
```

```{r child = 'rmd/04_descriptive_analysis/02_stdtimeprofile.Rmd'}
```

```{r child = 'rmd/04_descriptive_analysis/03_pkpd_relationship.Rmd'}
```

```{r child = 'rmd/04_descriptive_analysis/04_NCA_analysis.Rmd'}
```


 
```{r child = 'rmd/06_nmdat_integrity_check/01_load_data.Rmd'}
```

```{r child = 'rmd/06_nmdat_integrity_check/02_quick_check.Rmd'}
```

```{r child = 'rmd/06_nmdat_integrity_check/03_advanced_check.Rmd'}
```

```{r child = 'rmd/06_nmdat_integrity_check/04_buildIn_model.Rmd'}
```

 

```{r child = 'rmd/07_run_nmmodel/01_run_nonmem_model.Rmd'}
```

```{r child = 'rmd/07_run_nmmodel/02_model_diagnostic.Rmd'}
```

```{r child = 'rmd/07_run_nmmodel/03_model_decision_tree.Rmd'}
```


```{r child = 'rmd/08_run_simulation/50_run_sim.Rmd'}
```

```{r child = 'rmd/09_exposure_response/60_exposure_response.Rmd'}
```

```{r child = 'rmd/10_advanced_model/01_advanced_model.Rmd'}
```

```{r child = 'rmd/11_reporting/01_reporting.Rmd'}
```

```{r child = 'rmd/references.Rmd'}
```



```{r child = 'rmd/90_appendix/01_model_library.Rmd'}
```

```{r child = 'rmd/90_appendix/02_dplyr.Rmd'}
```

```{r child = 'rmd/90_appendix/03_ggplot.Rmd'}
```

```{r child = 'rmd/90_appendix/04_mrgsolve.Rmd'}
```

```{r child = 'rmd/90_appendix/05_tools.Rmd'}
```
 




 