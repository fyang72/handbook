---
title: "An Interactive Handbook for Pharmacometrics Analysis"
author: "Feng Yang"
date: "12/18/2018"
runtime: shiny
output:  
 html_document:
   toc: true
   fig_caption: true
   toc_float:
       collapsed: true
       smooth_scroll: true
   toc_depth: 3
   css: styles.css
   code_folding: show
   number_sections: true
   keep_md: no
pdf_document:
    fig_caption: yes
    keep_tex: yes
    toc: yes
    toc_depth: 3    
---




```{r global, include=FALSE, cache=FALSE}
 
```


```{r, setup, include=FALSE}
# back to [nonmem_dataset_integrity_check](#nonmem_dataset_integrity_check)
# http://www.pmxsolutions.com/2018/08/06/nonmem-model-fitting-as-a-gif-in-r-with-code/
#https://www.pmxsolutions.com/2018/12/10/creating-a-simple-pharmacometric-shiny-application-with-mrgsolve-in-r-part-1/

# Best practices for global/external variables used in a module 
# https://community.rstudio.com/t/best-practices-for-global-external-variables-used-in-a-module/5820/11

rm(list = ls())

if (1==2) {    
  setwd("~/handbook/")
  source("~/handbook/global.R")
}

```

 
```{r}

ALL <- reactiveValues(
  DATA   = list(), 
  FIGURE = list(), 
  TABLE = list(), 
  cppModel = list(), 
  ctlModel = list(), 
  script = list()
)  


  
```
 

 
```{r, eval=TRUE}
ihandbook = 0

folder.loc <- "~/handbook/util"

file.lst <-list.files(path = folder.loc, all.files = FALSE,full.names = TRUE, include.dirs = TRUE, recursive =TRUE)     

file.lst = file.lst[which(substr(file.lst, nchar(file.lst)-1, nchar(file.lst)) %in% c(".r", ".R"))]

for (ifile in 1:length(file.lst)) { 
  #print(file.lst[ifile]);  
  source(file=file.lst[ifile])  
}     #sys.source('file.R', envir=environment())


folder.loc <- "~/handbook/module/"
file.lst <-list.files(path = folder.loc, all.files = FALSE,full.names = TRUE, include.dirs = TRUE, recursive =TRUE)     
file.lst = file.lst[which(substr(file.lst, nchar(file.lst)-1, nchar(file.lst)) %in% c(".r", ".R"))]

file.lst = file.lst[which(!substr(gsub(folder.loc, "", file.lst, fix=TRUE), 1,1) %in% c("_"))]

for (ifile in 1:length(file.lst)) { 
  #print(file.lst[ifile]);  
  source(file=file.lst[ifile])  
}     #sys.source('file.R', envir=environment())

folder.loc <- "~/handbook/script/"
file.lst <-list.files(path = folder.loc, all.files = FALSE,full.names = TRUE, include.dirs = TRUE, recursive =TRUE)     
file.lst = file.lst[which(substr(file.lst, nchar(file.lst)-1, nchar(file.lst)) %in% c(".r", ".R"))]

file.lst = file.lst[which(!substr(gsub(folder.loc, "", file.lst, fix=TRUE), 1,1) %in% c("_"))]

for (ifile in 1:length(file.lst)) { 
  #print(file.lst[ifile]);  
  source(file=file.lst[ifile])  
}     #sys.source('file.R', envir=environment())

```
 
   
   
 
```{r eval=FALSE}
rmd <- list.files(pattern = '*.Rmd', recursive = T)
chunks <- paste0("```{r child = '", rmd, "'}\n```\n")
cat(chunks, sep = '\n')
```

```{r child = 'rmd/11_reporting/01_reporting.Rmd'}
```
 
 




 